{% extends 'BGridBundle::layout.html.twig' %}

{% block body %}


<div class="grid">
    <div class="head">
        <div class="row">
            <div class="text">Title</div>
            <div class="numbers">Price</div>
            <div class="numbers">Amount</div>
            <div></div>
        </div>
    </div>
    <div class="body" data-bind="template: {name: items.templateName, foreach: items.PriceItems}">

    </div>

</div>

<button data-bind="click: items.showCreateItemForm">Add</button>
<label for="poll-changes">
    Poll changes: <input id="poll-changes" type="checkbox" data-bind="checked: items.pollEnabled">
</label>

<script id="viewItemTmpl" type="text/html">
    <div class="row" data-bind="css: {isNew: isNew(), hasErrors: !isValid()}">
        <div class="text" data-bind="text: title"></div>
        <div class="numbers" data-bind="text: price"></div>
        <div class="numbers" data-bind="text: amount"></div>
        <div class="actions">
            <span class="action clickable" data-bind="click: edit">Edit</span>
            <span class="action clickable" data-bind="click: $root.items.showDeleteItemForm">Del</span>
        </div>
    </div>
</script>

<script id="editItemTmpl" type="text/html">
    <div class="row">
        <div class="text">
            <input type="text" data-bind="value: title">
        </div>
        <div class="numbers">
            <input type="text" data-bind="value: price">
        </div>
        <div class="numbers">
            <input type="text" data-bind="value: amount">
        </div>
        <div class="actions">
            <span class="action clickable static" data-bind="click: $root.items.persistItem">Save</span>
            <span class="action clickable static" data-bind="click: reset">Cancel</span>
        </div>
    </div>
</script>

{% endblock %}

{% block app_config %}
    {{ parent() }}
    App.Config.url = "{{ url }}";
    App.Config.url_poll = "{{ url_changelogs }}";
    App.Config.pageId = "{{ pageId }}";
{% endblock %}